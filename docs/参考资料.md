# ECE 391 参考资料清单

## 官方课程资料说明

**注意**: 伊利诺伊大学 ECE 391 的官方讲义（Lecture Notes/Slides）需要学生账号登录才能访问。

- **官方课程网站**: https://courses.grainger.illinois.edu/ece391/
- **讲义位置**: Spring 2024版本的讲义在 `secure/notes/student-notes-SP22.pdf`
- **访问限制**: 需要学生NetID登录

如果你是该课程的学生，可以通过以下渠道获取官方资料：
1. Canvas课程页面
2. Campuswire的Files标签
3. Piazza讨论区

---

## 推荐学习资源

### 1. 指令集与架构文档

#### x86架构（本项目使用）
- **Intel® 64 and IA-32 Architectures Software Developer's Manual**
  - Volume 1: Basic Architecture
  - Volume 2: Instruction Set Reference
  - Volume 3: System Programming Guide
  - 下载链接: https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html

- **OSDev Wiki - x86**
  - 在线资源: https://wiki.osdev.org/Main_Page
  - 涵盖内容: GDT, IDT, Paging, Interrupts, System Calls等
  - 非常适合OS开发入门

#### RISC-V架构（新版课程使用）
- **RISC-V Unprivileged ISA Manual** (Waterman et al.) - Volume I
- **RISC-V Privileged ISA Manual** (Waterman et al.) - Volume II
- **RISC-V ABI Specification** (Cheng & Clarke, eds.)

---

### 2. 汇编语言编程

- **PC Assembly Language** by Paul A. Carter
  - 免费PDF: https://pacman128.github.io/pcasm/
  - 涵盖x86汇编基础

- **x86 Assembly Guide** (University of Virginia)
  - 在线资源: https://www.cs.virginia.edu/~evans/cs216/guides/x86.html
  - 快速参考指南

- **Borin's "An Introduction to Assembly Programming with RISC-V"** (2023)
  - RISC-V汇编入门（新版课程）

---

### 3. 操作系统教材

#### 免费在线教材

**⭐ "Operating Systems: Three Easy Pieces"** by Arpaci-Dusseau
- 网址: https://pages.cs.wisc.edu/~remzi/OSTEP/
- 涵盖内容: 虚拟化、并发、持久化
- 强烈推荐！讲解清晰，适合自学

**⭐ "xv6: a simple, Unix-like teaching OS"** by MIT
- x86版本: https://pdos.csail.mit.edu/6.828/2018/xv6.html
- RISC-V版本: https://github.com/mit-pdos/xv6-riscv
- 包含完整源代码和注释
- 非常适合理解Unix系统调用实现

#### 经典教材

- **"Operating System Concepts"** by Silberschatz, Galvin, Gagne
  - 别名: "Dinosaur Book"（恐龙书）
  - 大学图书馆应该有

- **"Understanding the Linux Kernel"** by Bovet & Cesati
  - 深入讲解Linux内核实现
  - 适合进阶学习

- **"The Design and Implementation of the FreeBSD Operating System"** by McKusick
  - BSD系统设计

---

### 4. 硬件与设备规范

#### 中断控制器
- **8259 PIC (Programmable Interrupt Controller)**
  - OSDev Wiki: https://wiki.osdev.org/8259_PIC
  - 数据手册: Intel 8259A Datasheet

#### 串口通信
- **PC16C550D UART Datasheet** (Texas Instruments)
  - 用于串口驱动开发

#### 虚拟设备
- **Virtual I/O Device v1.2 Specification** (OASIS)
  - VirtIO设备规范
- **Red Hat Blog - Virtqueues and Virtio Ring**
  - VirtIO实现细节

#### 实时时钟
- **CMOS/RTC芯片编程**
  - OSDev Wiki: https://wiki.osdev.org/RTC
  - MC146818 RTC芯片规范

#### 定时器
- **PIT (Programmable Interval Timer)**
  - OSDev Wiki: https://wiki.osdev.org/Programmable_Interval_Timer
  - Intel 8253/8254 芯片文档

---

### 5. 开发工具文档

#### 版本控制
- **Git Book**
  - 在线免费: https://git-scm.com/book/en/v2
  - 中文版: https://git-scm.com/book/zh/v2

#### 编译器
- **GCC 13.3 Manual**
  - 官方文档: https://gcc.gnu.org/onlinedocs/
  - 包含编译选项、内联汇编等

#### 调试器
- **GDB Documentation**
  - 官方文档: https://sourceware.org/gdb/documentation/
  - 教程: https://www.gdbtutorial.com/

#### 汇编器
- **GNU Assembler Manual**
  - 在线文档: https://sourceware.org/binutils/docs/as/

#### 虚拟机
- **QEMU Documentation**
  - 官方文档: https://www.qemu.org/documentation/
  - 用于运行和调试OS

---

### 6. 文件格式规范

#### ELF可执行文件格式
- **ELF Manual Page**
  - Linux命令: `man elf`
  - 在线文档: https://man7.org/linux/man-pages/man5/elf.5.html

- **"ELF Format" by OSDev**
  - https://wiki.osdev.org/ELF

#### C语言标准
- **C11 Draft Standard (N1570)**
  - PDF下载: http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf
  - C语言官方规范

---

### 7. 在线学习资源

#### 视频课程
- **MIT 6.828: Operating System Engineering**
  - YouTube: https://www.youtube.com/playlist?list=PLfciLKR3SgqNJKKIKUliWoNBBH1VHL3AP
  - 配合xv6学习

- **UC Berkeley CS 162: Operating Systems**
  - YouTube: https://www.youtube.com/playlist?list=PLF2K2xZjNEf97A_uBCwEl61sdxWVP7VWC

#### 在线教程
- **OSDev.org**
  - https://wiki.osdev.org/
  - OS开发百科全书

- **JamesM's Kernel Development Tutorial**
  - http://www.jamesmolloy.co.uk/tutorial_html/
  - 从零开始写内核

- **The Little OS Book**
  - https://littleosbook.github.io/
  - 现代OS开发教程

---

### 8. 调试工具与技巧

#### QEMU + GDB调试
```bash
# 启动QEMU并等待GDB连接
qemu-system-i386 -s -S -hda mp3.img -m 64

# 在另一个终端启动GDB
gdb
(gdb) target remote localhost:1234
(gdb) symbol-file kernel
(gdb) break kernel.c:main
(gdb) continue
```

#### Bochs调试器
- Bochs官网: https://bochs.sourceforge.io/
- 内置调试器，适合底层调试

---

### 9. 代码示例与参考实现

#### GitHub上的学生实现
**注意**: 仅供学习参考，不要抄袭！

- https://github.com/xddxdd/uiuc-ece391-mp3
- https://github.com/jhoward321/Custom-OS
- https://github.com/ilufang/saenaios

这些仓库包含完整的实现，可以学习代码结构和设计思路。

---

### 10. 硬件编程参考

#### 端口I/O
```c
// 输出字节到端口
static inline void outb(uint16_t port, uint8_t val) {
    asm volatile ("outb %0, %1" : : "a"(val), "Nd"(port));
}

// 从端口读取字节
static inline uint8_t inb(uint16_t port) {
    uint8_t ret;
    asm volatile ("inb %1, %0" : "=a"(ret) : "Nd"(port));
    return ret;
}
```

#### 内联汇编
- **GCC Inline Assembly HOWTO**
  - https://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html

---

## 重要网站书签

| 资源 | URL | 用途 |
|------|-----|------|
| OSDev Wiki | https://wiki.osdev.org/ | OS开发百科 |
| Intel SDM | https://www.intel.com/sdm | x86架构手册 |
| OSTEP | https://pages.cs.wisc.edu/~remzi/OSTEP/ | OS教材 |
| xv6 | https://pdos.csail.mit.edu/6.828/2018/xv6.html | 教学OS源码 |
| QEMU文档 | https://www.qemu.org/docs/master/ | 虚拟机使用 |
| GDB文档 | https://sourceware.org/gdb/documentation/ | 调试器 |
| Linux源码 | https://elixir.bootlin.com/linux/latest/source | 参考实现 |

---

## 学习路径建议

### 对于Checkpoint 1 (启动与分页)
1. 阅读OSTEP的"Address Spaces"和"Paging"章节
2. 阅读OSDev Wiki的Paging Tutorial
3. 查阅Intel SDM Volume 3, Chapter 4 (Paging)
4. 参考xv6的vm.c实现

### 对于Checkpoint 2 (设备驱动)
1. 阅读OSTEP的"I/O Devices"章节
2. 学习8259 PIC编程（OSDev Wiki）
3. 理解中断处理机制（Intel SDM Volume 3, Chapter 6）
4. 参考Linux的keyboard.c驱动

### 对于Checkpoint 3 (文件系统)
1. 阅读OSTEP的"File Systems"章节
2. 研究Unix文件系统设计
3. 参考xv6的fs.c实现

### 对于Checkpoint 4 (系统调用)
1. 阅读OSTEP的"System Calls"章节
2. 理解特权级切换（Intel SDM Volume 3）
3. 学习ELF文件格式
4. 参考xv6的syscall.c和exec.c

### 对于Checkpoint 5 (调度)
1. 阅读OSTEP的"Scheduling"章节
2. 理解上下文切换机制
3. 学习PIT编程
4. 参考xv6的proc.c实现

---

## 课程相关论坛与讨论

- **Reddit r/osdev**
  - https://www.reddit.com/r/osdev/
  - OS开发者社区

- **Stack Overflow**
  - 标签: [operating-system], [x86], [kernel]

- **OSDev.org Forum**
  - https://forum.osdev.org/
  - 专业OS开发论坛

---

## 附录：常用命令速查

### 编译与运行
```bash
# 编译内核
cd student-distrib
make clean
make

# 运行QEMU
qemu-system-i386 -hda ../mp3.img -m 64

# 调试模式运行
qemu-system-i386 -s -S -hda ../mp3.img -m 64
```

### GDB常用命令
```
break function_name    # 设置断点
continue              # 继续执行
step                  # 单步执行（进入函数）
next                  # 单步执行（不进入函数）
print variable        # 打印变量
info registers        # 查看寄存器
x/10x address         # 查看内存（16进制）
backtrace            # 查看调用栈
```

---

**文档更新日期**: 2025-11-21

**注意**: 本文档基于 ECE 391 Spring 2025 的参考资料清单整理。实际课程资料以课程网站为准。
